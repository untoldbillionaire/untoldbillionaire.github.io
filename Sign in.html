<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign in</title>
    <style>
    /* Put this CSS in your existing stylesheet if you prefer */
    .rotating {
      display: inline-block;            /* keep transform behavior consistent */
      transform-origin: 50% 50%;        /* rotate around center */
      --rotation-duration: 3s;          /* change to speed up/slow down */
      animation: spin var(--rotation-duration) linear infinite;
      will-change: transform;
      cursor: pointer;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* If you want to respect users' reduced-motion preference */
    @media (prefers-reduced-motion:single-animation) {
      .rotating { animation: none !important; }
    }
 
</style>             
</head>
<body>
    <center class="freezer"><img class="rotating"  src="freezer.webp" alt="freezing sign" width="200px" height="200px">
    <h1>Freezing spun</h1></center>                               

 <!DOCTYPE html>
<html>
<head>
  <title>Firebase Auth Example</title>
</head>
<body>
  <center>
    <!-- Sign Up Form -->
    <form id="signupForm">
      Email:
      <input type="email" id="signupEmail" required><br><br>
      Password:
      <input type="password" id="signupPassword" required><br><br>
      <input type="submit" value="Sign Up">
    </form>


    <!-- Dashboard -->
    <div id="dashboard" style="display:none; margin-top:20px;">
      <h2>Welcome!</h2>
    
    </div>
  </center>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } 
      from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDWRSdDveag6AQIaCP4SR5X5caMyMiiktk",
      authDomain: "collection-abae0.firebaseapp.com",
      projectId: "collection-abae0",
      storageBucket: "collection-abae0.appspot.com",
      messagingSenderId: "721235736494",
      appId: "1:721235736494:web:8e81c5cf9cb633383cfa3f",
      measurementId: "G-ZCR2D4F94L"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // ✅ Sign Up + Redirect
    document.getElementById("signupForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("signupEmail").value;
      const password = document.getElementById("signupPassword").value;

      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;

        alert("Account created for " + user.email);

        // ✅ Redirect immediately after first sign‑up
        window.location.href = "untold.html";  // change to your actual home page file or URL
      } catch (error) {
        alert("Error: " + error.message);
      }
    });

    // ✅ Sign In + Redirect
    document.getElementById("signupForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("loginEmail").value;
      const password = document.getElementById("loginPassword").value;

      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;

        document.getElementById("displayEmail").textContent = user.email;
        document.getElementById("dashboard").style.display = "block";

        // ✅ Redirect after login
        window.location.href = "untold.html";  // change to your actual home page file or URL
      } catch (error) {
        alert("Error: " + error.message);
      }
    });

    // ✅ Detect user state
    onAuthStateChanged(auth, (user) => {
      if (user) {
        console.log("User is signed in:", user.email);
      } else {
        console.log("No user signed in");
      }
    });
     // ✅ Auto-login using Firebase session tokens
    onAuthStateChanged(auth, async (user) => {
      if (user) {
        console.log("User is signed in:", user.email);

        // Get ID token (short-lived access token)
        const idToken = await user.getIdToken();
        console.log("Access Token:", idToken);

        // Show dashboard
        document.getElementById("displayEmail").textContent = user.email;
        document.getElementById("dashboard").style.display = "block";
      } else {
        console.log("No user signed in");
      }
    });  
  </script>



    
</body>

</html>
































